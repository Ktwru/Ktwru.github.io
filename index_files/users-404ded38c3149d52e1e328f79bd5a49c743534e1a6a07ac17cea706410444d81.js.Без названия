(function(){App.ns("Controls.Users.ShowController",App.Control({init(){if(this.track("Loaded"),this.infiniteScroll=new App.Controls.InfiniteScroll(".items-list"),App.data.next_rank_color&&App.rapheal(()=>{const e=Math.max(0,Math.min(99.9,App.data.rank_progress+1));if($("#honor_chart").length)return this.chart=Raphael.donutChartStyle1("honor_chart",200,50,e,0,{value1Color:App.consts.colors.ranks[App.data.next_rank_color],backColor:"rgba(255,255,255,0.125)",maxCircleValue:100,startPoint:1.5*Math.PI})}),App.data.stats_refreshing)return App.PubSub.register("stats_refresh",App.data.profile.username,App.load),$.get(App.route("check_stats"),function(e){if(e.ready)return App.load({params:{refreshed:!0}})})},events:{".js-reload-action:not(.js-working) click":e=>(e.text("Working..."),e.addClass("js-working"),$.post(e.data("href"),{},()=>App.load())),"#tell_me_more_referrals click":e=>($("#referrals").slideDown(500),e.fadeOut(800),App.track("Referrals Info Clicked",{page:"User Profile"})),"#toggle_relationship click"(e){return $.post(App.route("toggle_relationship"),t=>{if(t.success)return t.following?(this.track("Followed"),e.find("span").text("Unfollow"),e.addClass("is-red-text").removeClass("is-green-text")):(this.track("Un-Followed"),e.find("span").text("Follow"),e.addClass("is-green-text").removeClass("is-red-text"))})},".js-delete-collection click":e=>App.confirmModal.show({titleHtml:"Are you sure you want to delete this collection?",messageHtml:"You will not be able to undo this operation. Are you sure?",confirmHtml:"Yes, delete it",confirm(){const t=App.route("collection",{id:e.data("collectionId")});return App.Api["delete"](t,null,()=>e.closest(".list-item").slideUp())}})},track:(e,t={})=>(App.data.profile&&(t.profile_isSelf=App.data.profile.isSelf,t.profile_username=App.data.profile.username,t.profile_name=App.data.profile.name,t.profile_clan=App.data.profile.clan),App.track(`Profile Page: ${e}`,t))})),App.Controls.InvitationController=App.Control({events:{"#send_access_email_link click"(){const e=$("#user_email").val();return e?App.sendAccessLink(e,"Invitation Page"):alert("Please enter your email address")}}})}).call(this),function(){App.ns("Controls.Users.RankingsController",App.Control({init(e,t){this.trackingName="Honor Leaderboard",$(`[data-username='${App.currentUser.username}']`).addClass("is-current-player"),this.track("Loaded")}}))}.call(this),function(){}.call(this);